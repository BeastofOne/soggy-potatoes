<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>New Order!</title>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, sans-serif; background-color: #f0fdf4;">
    <table width="100%" cellpadding="0" cellspacing="0" style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">
        <!-- Header -->
        <tr>
            <td style="background-color: #10b981; padding: 25px; text-align: center;">
                <h1 style="color: #ffffff; margin: 0; font-size: 28px;">
                    New Order!
                </h1>
                <p style="color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 18px;">
                    {{ order.order_number }}
                </p>
            </td>
        </tr>

        <!-- Payment Status -->
        <tr>
            <td style="padding: 25px 30px; border-bottom: 1px solid #e5e7eb;">
                <p style="color: #6b7280; font-size: 12px; text-transform: uppercase; margin: 0 0 8px 0;">
                    Payment Status
                </p>
                {% if order.status == 'processing' %}
                <span style="display: inline-block; background-color: #dcfce7; color: #166534; padding: 6px 14px; border-radius: 20px; font-size: 14px; font-weight: bold;">
                    PAID
                </span>
                {% else %}
                <span style="display: inline-block; background-color: #fef9c3; color: #854d0e; padding: 6px 14px; border-radius: 20px; font-size: 14px; font-weight: bold;">
                    {{ order.get_status_display|upper }}
                </span>
                {% endif %}
            </td>
        </tr>

        <!-- Ship To -->
        <tr>
            <td style="padding: 25px 30px; border-bottom: 1px solid #e5e7eb;">
                <p style="color: #6b7280; font-size: 12px; text-transform: uppercase; margin: 0 0 8px 0;">
                    Ship To
                </p>
                <p style="color: #333; font-size: 16px; margin: 0; line-height: 1.6;">
                    <strong>{{ order.shipping_name }}</strong><br>
                    {{ order.shipping_address }}<br>
                    {{ order.shipping_city }}, {{ order.shipping_state }} {{ order.shipping_zip }}<br>
                    {{ order.shipping_country }}
                </p>
                <p style="color: #555; font-size: 14px; margin: 15px 0 0 0;">
                    <strong>Email:</strong> {{ order.email }}<br>
                    {% if order.phone %}<strong>Phone:</strong> {{ order.phone }}{% endif %}
                </p>
            </td>
        </tr>

        <!-- Order Items -->
        <tr>
            <td style="padding: 25px 30px;">
                <p style="color: #6b7280; font-size: 12px; text-transform: uppercase; margin: 0 0 15px 0;">
                    Order Items
                </p>

                <table width="100%" cellpadding="0" cellspacing="0">
                    {% for item in order.items.all %}
                    <tr>
                        <td style="padding: 10px 0; border-bottom: 1px solid #f3f4f6;">
                            <span style="color: #333;">{{ item.quantity }}x {{ item.product_name }}</span>
                        </td>
                        <td style="padding: 10px 0; border-bottom: 1px solid #f3f4f6; text-align: right;">
                            <span style="color: #333;">${{ item.total_price }}</span>
                        </td>
                    </tr>
                    {% endfor %}

                    <tr>
                        <td style="padding: 10px 0; color: #6b7280;">Subtotal</td>
                        <td style="padding: 10px 0; text-align: right; color: #6b7280;">${{ order.subtotal }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px 0; color: #6b7280;">Shipping</td>
                        <td style="padding: 10px 0; text-align: right; color: #6b7280;">${{ order.shipping_cost }}</td>
                    </tr>
                    {% if order.tax %}
                    <tr>
                        <td style="padding: 10px 0; color: #6b7280;">Tax</td>
                        <td style="padding: 10px 0; text-align: right; color: #6b7280;">${{ order.tax }}</td>
                    </tr>
                    {% endif %}
                    <tr>
                        <td style="padding: 15px 0 0 0;">
                            <strong style="font-size: 18px; color: #333;">Total</strong>
                        </td>
                        <td style="padding: 15px 0 0 0; text-align: right;">
                            <strong style="font-size: 24px; color: #10b981;">${{ order.total }}</strong>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>

        <!-- Admin Link -->
        <tr>
            <td style="background-color: #f9fafb; padding: 20px 30px; text-align: center;">
                <a href="{{ admin_url }}"
                   style="display: inline-block; background-color: #8b5cf6; color: #ffffff; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-size: 14px;">
                    View in Admin Panel
                </a>
            </td>
        </tr>

        <!-- Footer -->
        <tr>
            <td style="padding: 20px 30px; text-align: center;">
                <p style="color: #9ca3af; font-size: 12px; margin: 0;">
                    This is an automated notification from Soggy Potatoes
                </p>
            </td>
        </tr>
    </table>
</body>
</html>
